<div class="row mg-0 pd-0 clearfix justify-content-between  pt-2 bd-b ">
    <div class="col-lg-6">
        <h6 class="tx-echos1"><i class="fas fa-folder-open  bg-m" style="padding:6px; border-radius: 50%; "></i> Gestion des Dossiers</h6>
    </div>
    <div class="col-lg-6 ">
        <ul class="nav float-right list-inline justify-content-end">

            <li class="nav-item ">
                <a class="nav-link3 " data-toggle="tab" href="#"><span
                          class="tx-echos">
                          <i class="fas fa-question bg-light tx-16 tx-echos1"
                              style="padding:6px; border-radius:50%"></i> </span></a>
            </li>
        </ul>
    </div>
</div>


<div class="d-flex flex-xs justify-content-between bd-t">
    <div class=" col-lg-4 bd-r bd-2 " style="background:#FFFF; height:100vh ">
        <div class="row  justify-content-between  bg-light pt-2 bd-b">
            <div class="col-lg-12">
                <h6 class="tx-echos"><i class="fas fa-folder" style="padding:6px; border-radius: 50%; "></i> Dossiers principaux</h6>
            </div>
        </div>

        <div class="card-body p-0 ">
            <div class="d-flex align-items-center flex-wrap bd-b" *ngIf="allUserStructures && allUserStructures.length;">

                <div class="p-2 cursor-pointer" *ngFor="let structure of allUserStructures" [class.accent-facebook-left]="selectedStructure && structure.id == selectedStructure.id" (click)="onSetSelected(structure)">
                    <h6 class="tx-echos tx-14"><i class="fas fa-folder-open tx-18 tx-echos"></i> {{structure.cigle}} : {{structure.libelle | titlecase}}</h6>
                    <span class=" mr-1  tx-14 mg-b-5 tx-echos pl-2 ">
                      <i class="fas fa-folder tx-echos tx-14 mg-b-5"></i>
                    </span>
                    <span class=" mr-1   mg-b-5 tx-echos ">{{structure.cr_dossiers_count}}</span>
                    <span class=" mr-1  tx-14 mg-b-5 tx-success pl-2 ">
                      <i class="fas fa-envelope tx-14 mg-b-5 tx-success"></i>
                    </span>
                    <span class=" mr-1   mg-b-5 tx-success ">{{structure.nb_courrier_entrants}}</span>
                    <span class=" mr-1  tx-14 mg-b-5 tx-warning ">
                      <i class="fas fa-envelope-open tx-14 mg-b-5 tx-warning"></i>
                    </span>
                    <span class=" mr-1  mg-b-5 tx-warning">{{structure.nb_courrier_sortants}} </span>
                    <span class=" mr-1  tx-14 mg-b-5 tx-echos1 ">
                      <i class="fas fa-envelope-open-text tx-14 mg-b-5 tx-echos1"></i>
                    </span>
                    <span class=" mr-1  mg-b-5 tx-echos1">{{structure.nb_courrier_internes}} </span>
                </div>
            </div>



        </div>
    </div>

    <div class="col-lg-8 ">
        <div class="grid-container">
            <div class="sidebar" [class.sidebar_small]="modalData">
              <div class="col-12  mg-0 pd-0 clearfix   bd-b" *ngIf="selectedStructure">
                <div class="d-flex ">
                  <button class="btn btn-sm btn-link" (click)="onSetSelected(selectedStructure)">
                    <i class="fal fa-2x fa-arrow-circle-left"></i>
                  </button>
                    <h6 class="tx-echos"><i class="fas fa-folder" style="padding:6px; border-radius: 50%; "></i> Dossiers : {{selectedStructure.libelle}}</h6>
                </div>
              </div>
                <div class="row row-xs justify-content-between  mg-0 pd-0  pt-1  " style="background: #f5f5f4;">

                    <div class="col-lg-7">
                        <div class="input-group ">
                            <input type="text" class="form-control  border-0 " style="background: #f5f5f4;" placeholder="Recherches..." [(ngModel)]="dataHelper.searchTerm">
                        </div>
                    </div>

                    <div class="col-lg-5 ">
                        <ul class="nav float-right list-inline h-100  justify-content-end">
                            <li class="nav-item my-auto">
                                <button class="btn btn-link btn-yeto btn-oblong card-1" [disabled]="(dataHelper.loading$ | async)" (click)="onShowCreateForm();">
                          <i class="fal fa-plus-circle tx-16" ></i>
                      </button>
                            </li>
                        </ul>
                    </div>

                </div>
                <ng-container *ngIf="dataHelper.data$ | async | baseColumnIdFilter:[{column: 'structure', filterBase: selectedStructure ? [selectedStructure] : [] }] as items">
                    <div class="row row-xs mg-0 pd-0 clearfix pt-2 pb-4 bg-light bd-t" *ngIf="items.length; else noItem">
                        <div class="col-lg-4 p-2" *ngFor="let dossier of items; trackBy: dataHelper.trackByFn">
                            <div class="mycard4" style="border-radius: 0% 10% 10% 10%;">
                                <div class="text-center bd-b bg-white p-3"> <i class="fas fa-folder tx-echos tx-50"></i></div>
                                <div class=" text-center p-2">
                                    <span class="tx-echos1 tx-bold"  [routerLink]="['./',dossier.id]"> {{ dossier.libelle | uppercase }} </span>
                                    <p class="p-0" [routerLink]="['./',dossier.id]">
                                        <span class="tx-echos tx-bold"> {{dossier.structure?.cigle}} </span>
                                    </p>
                                    <p class="p-0 tx-14">
                                        <span class=" mr-1 bg-light tx-success  tx-bolder">{{dossier.nb_courrier_entrants}}</span>
                                        <span class=" mr-1 bg-light  tx-echos1  tx-bolder">||</span>
                                        <span class=" mr-1 bg-light tx-warning  tx-bolder">{{dossier.nb_courrier_sortants}}</span>
                                        <span class=" mr-1 bg-light  tx-echos1  tx-bolder">||</span>
                                        <span class=" mr-1 bg-light tx-echos1  tx-bolder">{{dossier.nb_courrier_internes}}</span>
                                    </p>
                                    <p class="">
                                        <span class=" mx-2 tx-bold" container="body" ngbTooltip="Modifier" (click)="onShowUpdateForm(dossier) "> <i class="fas fa-edit tx-echos"></i> </span>
                                        <span class=" mx-2 tx-bold" container="body" ngbTooltip="Dupliquer" (click)="onShowCreateForm(dossier) "> <i class="fas fa-clone tx-echos"></i> </span>
                                        <span class=" mx-2 tx-bold" container="body" ngbTooltip="Supprimer" (click)="onDelete(dossier) "> <i class="fas fa-times-square tx-echos"></i> </span>
                                    </p>
                                </div>

                            </div>
                        </div>
                    </div>
                </ng-container>
            </div>
            <div class="main-content scroll-11 " [class.main-content_large]="modalData">
              <ng-container *ngIf="modalData">
                <div class="col-12  mg-0 pd-0 clearfix   bd-b">
                  <div class="d-flex ">
                    <button class="btn btn-sm btn-link" [routerLink]="['./']">
                      <i class="fal fa-2x fa-arrow-circle-left"></i>
                    </button>
                      <h6 class="tx-echos"><i class="fas fa-folders" style="padding:6px; border-radius: 50%; "></i> Sous dossiers : {{modalData.libelle}}</h6>
                  </div>
                </div>
                <ul ngbNav #nav="ngbNav" class="nav-tabs nav-fill" [destroyOnHide]="false">
                  <li [ngbNavItem]="'entrant'">
                      <a ngbNavLink class="">
                          <i class="fas fa-envelope tx-primary bold "></i> Entrants: {{modalData.nb_courrier_entrants}}
                      </a>
                      <ng-template ngbNavContent>
                        <div [class.loading]="entrantHelper.loading$ | async">
                          <ng-container *ngIf="entrantHelper.data$ | async as items">
                            <ul class=" list-group list-group-flush" *ngIf="items.length; else emptyTemplate">
                              <li class="list-group-item card-2" *ngFor="let courrier of items">
                                  <a (click)="courrier.isCollapsed = !courrier.isCollapsed" [attr.aria-expanded]="!courrier.isCollapsed" aria-controls="collapseExample">
                                      <div class="d-flex">
                                          <i class="fal fa-2x list-group-icon" [ngClass]="!courrier.isCollapsed ? 'fa-angle-right' : 'fa-angle-down'" [ngbTooltip]="courrier.courrier?.urgence?.libelle" [container]="'body'" [style.color]="courrier.courrier.urgence.couleur" style="padding:6px; border-radius: 50%; "></i>
                                          <div class="pd-sm-l-10" [ngbTooltip]="courrier.courrier?.objet" [container]="'body'">
                                              <p class="tx-ether4 mg-b-0"> <span class="tx-12 mg-b-0 tx-yeto pt-2"> {{courrier?.libelle}}</span> {{courrier.courrier?.objet}}</p>
                                              <span class="text-info mb-0" *ngIf="!courrier.courrier?.cloture">{{courrier.courrier?.statut?.libelle | titlecase}}</span>
                                              <span class="mb-0" [ngClass]="courrier.courrier?.cloture.valider ? 'text-success' : 'text-danger'" *ngIf="courrier.courrier?.cloture">
                                                  {{courrier.courrier?.cloture.libelle | titlecase}}, le {{courrier.courrier?.date_cloture | date:'mediumDate' : undefined : 'fr'}}
                                              </span>
                                          </div>
                                          <div class="mg-l-auto text-right" [ngbTooltip]="courrier.courrier?.objet" [container]="'body'">
                                              <a (click)="onSelectCourrierEntrant(courrier)" class="cursor-pointer">
                                                  <i class="fal fa-info-circle fa-2x"></i>
                                              </a>
                                          </div>
                                      </div>
                                  </a>
                                  <div #collapse="ngbCollapse" [(ngbCollapse)]="!courrier.isCollapsed">
                                      <div class="d-flex  justify-content-between flex-wrap border-top border-bottom  py-2 bd-b">
                                          <h5 class="tx-echos"><i class="fal fa-circle  bg-white" style="padding:6px; border-radius: 50%; "></i> Détails du Courrier </h5>
                                          <button (click)="onSelectCourrierEntrant(courrier)" class="btn btn-sm tx-13 my-auto btn-outline-primary">
                                            Voir plus
                                          </button>
                                      </div>
                                      <div class="d-flex flex-wrap justify-content-between">
                                          <div class="col-12 col-md-6">

                                              <!-- Code -->
                                              <div class="my-3  " style="font-size: 16px;" *ngIf="courrier.courrier?.dossier">
                                                  <span class="mr-2">
                                        Dossier:
                                      </span>
                                                  <span class="tx-rubik tx-dark">{{courrier.courrier?.dossier?.libelle}}</span>
                                              </div>

                                              <!-- Code -->
                                              <div class="my-3  " style="font-size: 16px;">
                                                  <span class="mr-2">
                                  Code:
                                </span>
                                                  <span class="tx-rubik tx-dark">{{courrier.courrier?.libelle}}</span>
                                              </div>


                                              <!-- CNI -->
                                              <div class="my-3  " style="font-size: 16px;">
                                                  <span class="mr-2">
                                   Objet:
                                </span>
                                                  <span class="tx-rubik tx-dark">{{courrier.courrier?.objet}}</span>
                                              </div>


                                              <!-- Email  -->
                                              <div class="my-3 " style="font-size: 16px;">
                                                  <span class="mr-2">
                                  Type:
                                </span>
                                                  <span class="tx-rubik tx-dark">{{courrier.courrier?.type?.libelle}}</span>
                                              </div>


                                              <!-- Addresse -->
                                              <div class="my-3 " style="font-size: 16px;">
                                                  <span class="mr-2">
                                  Nature:
                                </span>
                                                  <span class="tx-rubik tx-dark">{{courrier.courrier?.nature?.libelle}}</span>
                                              </div>

                                              <!-- Addresse -->
                                              <div class="my-3 " style="font-size: 16px;">
                                                  <span class="mr-2">
                                      Structure:
                                    </span>
                                                  <span class="tx-rubik tx-dark">{{courrier.courrier?.structure?.libelle}}</span>
                                              </div>

                                              <!-- Addresse -->
                                              <div class="my-3 " style="font-size: 16px;">
                                                  <span class="mr-2">
                                      Suivi par:
                                    </span>
                                                  <span class="tx-rubik tx-dark">{{courrier.courrier?.suivi_par_user?.libelle}}</span>
                                              </div>

                                              <!-- Addresse -->
                                              <div class="my-3 " style="font-size: 16px;">
                                                  <span class="mr-2">
                                                  Ajouter par:
                                              </span>
                                                  <span class="tx-rubik tx-dark">{{courrier.courrier?.created_by?.libelle}}</span>
                                              </div>
                                          </div>

                                          <div class="col-12 col-md-6">

                                              <!-- Urgence -->
                                              <div class="my-3 " style="font-size: 16px;">
                                                  <span class="mr-2">
                                  Urgence:
                                </span>
                                                  <span class="tx-rubik tx-dark">{{courrier.courrier?.urgence?.libelle}}</span>
                                              </div>

                                              <!-- Urgence -->
                                              <div class="my-3 " style="font-size: 16px;">
                                                  <span class="mr-2">
                                Date limite:
                              </span>
                                                  <span class="tx-rubik tx-dark">{{courrier.courrier?.date_limit |  date:'mediumDate' : undefined : 'fr'}}</span>
                                              </div>

                                              <!-- Statut -->
                                              <div class="my-3 " style="font-size: 16px;">
                                                  <span class="mr-2">
                                        Statut:
                                      </span>
                                                  <span class="text-info mb-0" *ngIf="!courrier.courrier?.cloture">{{courrier.courrier?.statut?.libelle | titlecase}}</span>
                                                  <span class="mb-0" [ngClass]="courrier.courrier?.cloture.valider ? 'text-success' : 'text-danger'" *ngIf="courrier.courrier?.cloture">
                                        {{courrier.courrier?.cloture.libelle | titlecase}}, le {{courrier.courrier?.date_cloture | date:'mediumDate' : undefined : 'fr'}}
                                    </span>
                                              </div>


                                              <!-- Telephone -->
                                              <div class="my-3" style="font-size: 16px;">
                                                  <span class="mr-2">
                                  Date arrivé:
                                </span>
                                                  <span class="tx-rubik tx-dark">{{courrier.date_arrive | date:'mediumDate' : undefined : 'fr'}}</span>
                                              </div>


                                              <!-- Role -->
                                              <div class="my-3" style="font-size: 16px;">
                                                  <span class="mr-2">
                                  Date de redaction:
                                </span>
                                                  <span class="tx-rubik tx-dark">{{ courrier.courrier?.date_redaction | date:'mediumDate' : undefined : 'fr'}}</span>
                                              </div>

                                              <!-- NOm -->
                                              <div class="my-3 " style="font-size: 16px;">
                                                  <span class="mr-2">
                                                    Provenance:
                                                  </span>
                                                  <span class="tx-rubik tx-dark">{{courrier.provenance?.libelle}}</span>
                                              </div>

                                              <!-- NOm -->
                                              <div class="my-3 " style="font-size: 16px;">
                                                  <span class="mr-2">
                                                    Expediteur:
                                                  </span>
                                                  <span class="tx-rubik tx-dark">{{courrier.expediteur?.libelle}}</span>
                                              </div>
                                          </div>

                                          <div class="col-12">
                                              <!-- NOm -->
                                              <div class="my-3 " style="font-size: 16px;text-align: justify;">
                                                  <span class="mr-2">
                                                    Description:
                                                  </span>
                                                  <span class="tx-rubik tx-dark">{{courrier.courrier?.commentaire}}</span>
                                              </div>
                                          </div>
                                      </div>
                                  </div>
                              </li>
                          </ul>
                          </ng-container>
                        </div>


                        </ng-template>
                  </li>
                  <li [ngbNavItem]="'sortant'">
                    <a ngbNavLink class="">
                        <i class="fas fa-envelope-open tx-primary bold "></i> Sortants: {{modalData.nb_courrier_sortants}}
                    </a>
                    <ng-template ngbNavContent>
                      <div [class.loading]="sortantHelper.loading$ | async">
                        <ng-container *ngIf="sortantHelper.data$ | async as items">
                          <ul class=" list-group list-group-flush" *ngIf="items.length; else emptyTemplate">
                            <li class="list-group-item card-2" *ngFor="let courrier of items">
                                <a (click)="courrier.isCollapsed = !courrier.isCollapsed" [attr.aria-expanded]="!courrier.isCollapsed" aria-controls="collapseExample">
                                    <div class="d-flex">
                                        <i class="fal fa-2x list-group-icon" [ngClass]="!courrier.isCollapsed ? 'fa-angle-right' : 'fa-angle-down'" [ngbTooltip]="courrier.courrier?.urgence?.libelle" [container]="'body'" [style.color]="courrier.courrier.urgence.couleur" style="padding:6px; border-radius: 50%; "></i>
                                        <div class="pd-sm-l-10" [ngbTooltip]="courrier.courrier?.objet" [container]="'body'">
                                            <p class="tx-ether4 mg-b-0"> <span class="tx-12 mg-b-0 tx-yeto pt-2"> {{courrier?.libelle}}</span> {{courrier.courrier?.objet}}</p>
                                            <span class="text-info mb-0" *ngIf="!courrier.courrier?.cloture">{{courrier.courrier?.statut?.libelle | titlecase}}</span>
                                            <span class="mb-0" [ngClass]="courrier.courrier?.cloture.valider ? 'text-success' : 'text-danger'" *ngIf="courrier.courrier?.cloture">
                                                {{courrier.courrier?.cloture.libelle | titlecase}}, le {{courrier.courrier?.date_cloture | date:'mediumDate' : undefined : 'fr'}}
                                            </span>
                                        </div>
                                        <div class="mg-l-auto text-right" [ngbTooltip]="courrier.courrier?.objet" [container]="'body'">
                                            <a (click)="onSelectCourrierSortant(courrier)" class="cursor-pointer">
                                                <i class="fal fa-info-circle fa-2x"></i>
                                            </a>
                                        </div>
                                    </div>
                                </a>
                                <div #collapse="ngbCollapse" [(ngbCollapse)]="!courrier.isCollapsed">
                                    <div class="d-flex  justify-content-between flex-wrap border-top border-bottom  py-2 bd-b">
                                        <h5 class="tx-echos"><i class="fal fa-circle  bg-white" style="padding:6px; border-radius: 50%; "></i> Détails du Courrier </h5>
                                        <button (click)="onSelectCourrierSortant(courrier)" class="btn btn-sm tx-13 my-auto btn-outline-primary">
                                          Voir plus
                                        </button>
                                    </div>

                                    <div class="d-flex flex-wrap justify-content-between">
                                      <div class="col-12 col-md-6">

                                          <!-- Code -->
                                          <div class="my-3  " style="font-size: 16px;" *ngIf="courrier.courrier?.dossier">
                                              <span class="mr-2">
                                                Dossier:
                                              </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.dossier?.libelle}}</span>
                                          </div>

                                          <!-- Code -->
                                          <div class="my-3  " style="font-size: 16px;">
                                              <span class="mr-2">
                                                  Code:
                                              </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.libelle}}</span>
                                          </div>


                                          <!-- CNI -->
                                          <div class="my-3  " style="font-size: 16px;">
                                              <span class="mr-2">
                                                  Objet:
                                              </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.objet}}</span>
                                          </div>


                                          <!-- Email  -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                                                  Type:
                                              </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.type?.libelle}}</span>
                                          </div>


                                          <!-- Addresse -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                                                  Nature:
                                              </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.nature?.libelle}}</span>
                                          </div>

                                          <!-- NOm -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                                                  Structure:
                                              </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.structure?.libelle}}</span>
                                          </div>

                                          <!-- Addresse -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                                                  Ajouter par:
                                              </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.created_by?.libelle}}</span>
                                          </div>
                                      </div>

                                      <div class="col-12 col-md-6">
                                          <!-- Numero -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                                                  Numero Courrier:
                                              </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.numero}}</span>
                                          </div>

                                          <!-- Urgence -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                                                  Urgence:
                                              </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.urgence?.libelle}}</span>
                                          </div>

                                          <!-- Statut -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                                                  Statut:
                                              </span>
                                              <span class="text-warning mb-0" *ngIf="!courrier.courrier?.cloture">{{courrier.courrier?.statut?.libelle | titlecase}}</span>
                                              <span class="mb-0" [ngClass]="courrier.courrier?.cloture.valider ? 'text-success' : 'text-danger'" *ngIf="courrier.courrier?.cloture">
                                                  {{courrier.courrier?.cloture.libelle | titlecase}}, le {{courrier.courrier?.date_cloture | date:'mediumDate' : undefined : 'fr'}}
                                              </span>
                                          </div>


                                          <!-- Role -->
                                          <div class="my-3" style="font-size: 16px;">
                                              <span class="mr-2">
                                                  Date de redaction:
                                              </span>
                                              <span class="tx-rubik tx-dark">{{ courrier.courrier?.date_redaction | date:'mediumDate' : undefined : 'fr'}}</span>
                                          </div>

                                          <!-- Telephone -->
                                          <div class="my-3" style="font-size: 16px;">
                                              <span class="mr-2">
                                                  Date envoie:
                                              </span>
                                              <span class="tx-rubik tx-dark">{{courrier.date_envoie | date:'mediumDate' : undefined : 'fr'}}</span>
                                          </div>
                                      </div>

                                      <div class="col-12" *ngIf="courrier.courrier?.commentaire">
                                          <!-- NOm -->
                                          <div class="my-3 " style="font-size: 16px;text-align: justify;">
                                              <span class="mr-2">
                                                  Description:
                                              </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.commentaire}}</span>
                                          </div>
                                      </div>
                                  </div>

                                    <div class="card" *ngIf="courrier.destinataires && courrier.destinataires.length">
                                        <div class="card-body p-2  text-dark">
                                            <h4 class="text-info"> Destinataires</h4>
                                            <table class="table table-striped table-sm text-dark">
                                                <thead>
                                                    <tr>
                                                        <th>Nom</th>
                                                        <th>Telephone</th>
                                                        <th>Email</th>
                                                        <th>Address</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let item of courrier.destinataires">
                                                        <td class="">{{item.libelle}}</td>
                                                        <td class="" style="white-space: break-spaces;
                                                word-wrap: initial;">{{item.coordonnee.telephone}}</td>
                                                        <td class="" style="white-space: break-spaces;
                                                word-wrap: initial;">{{item.coordonnee.email}}</td>
                                                        <td class="" style="white-space: break-spaces;
                                              word-wrap: initial;">{{item.coordonnee.adresse}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <div class="card" *ngIf="courrier.ampiliations && courrier.ampiliations.length">
                                        <div class="card-body p-2  text-dark">
                                            <h4 class="text-info"> Ampiliations</h4>
                                            <table class="table table-striped table-sm text-dark">
                                                <thead>
                                                    <tr>
                                                        <th>Nom</th>
                                                        <th>Telephone</th>
                                                        <th>Email</th>
                                                        <th>Address</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let item of courrier.ampiliations">
                                                        <td class="">{{item.libelle}}</td>
                                                        <td class="" style="white-space: break-spaces;
                                              word-wrap: initial;">{{item.coordonnee.telephone}}</td>
                                                        <td class="" style="white-space: break-spaces;
                                              word-wrap: initial;">{{item.coordonnee.email}}</td>
                                                        <td class="" style="white-space: break-spaces;
                                            word-wrap: initial;">{{item.coordonnee.adresse}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        </ng-container>
                      </div>
                      </ng-template>
                </li>
                <li [ngbNavItem]="'interne'">
                  <a ngbNavLink class="">
                      <i class="fas fa-envelope-open-text tx-primary bold "></i> Internes: {{modalData.nb_courrier_internes}}
                  </a>
                  <ng-template ngbNavContent>
                    <div [class.loading]="interneHelper.loading$ | async">
                      <ng-container *ngIf="interneHelper.data$ | async as items">
                        <ul class=" list-group list-group-flush" *ngIf="items.length; else emptyTemplate">
                          <li class="list-group-item card-2" *ngFor="let courrier of items">
                              <a (click)="courrier.isCollapsed = !courrier.isCollapsed" [attr.aria-expanded]="!courrier.isCollapsed" aria-controls="collapseExample">
                                  <div class="d-flex">
                                      <i class="fal fa-2x list-group-icon" [ngClass]="!courrier.isCollapsed ? 'fa-angle-right' : 'fa-angle-down'" [ngbTooltip]="courrier.courrier?.urgence?.libelle" [container]="'body'" [style.color]="courrier.courrier.urgence.couleur" style="padding:6px; border-radius: 50%; "></i>
                                      <div class="pd-sm-l-10" [ngbTooltip]="courrier.courrier?.objet" [container]="'body'">
                                          <p class="tx-ether4 mg-b-0"> <span class="tx-12 mg-b-0 tx-yeto pt-2"> {{courrier?.libelle}}</span> {{courrier.courrier?.objet}}</p>
                                          <span class="text-info mb-0" *ngIf="!courrier.courrier?.cloture">{{courrier.courrier?.statut?.libelle | titlecase}}</span>
                                          <span class="mb-0" [ngClass]="courrier.courrier?.cloture.valider ? 'text-success' : 'text-danger'" *ngIf="courrier.courrier?.cloture">
                                              {{courrier.courrier?.cloture.libelle | titlecase}}, le {{courrier.courrier?.date_cloture | date:'mediumDate' : undefined : 'fr'}}
                                          </span>
                                      </div>
                                      <div class="mg-l-auto text-right" [ngbTooltip]="courrier.courrier?.objet" [container]="'body'">
                                          <a (click)="onSelectCourrierInterne(courrier)" class="cursor-pointer">
                                              <i class="fal fa-info-circle fa-2x"></i>
                                          </a>
                                      </div>
                                  </div>
                              </a>
                              <div #collapse="ngbCollapse" [(ngbCollapse)]="!courrier.isCollapsed">
                                  <div class="d-flex  justify-content-between flex-wrap border-top border-bottom  py-2 bd-b">
                                      <h5 class="tx-echos"><i class="fal fa-circle  bg-white" style="padding:6px; border-radius: 50%; "></i> Détails du Courrier </h5>
                                      <button (click)="onSelectCourrierInterne(courrier)" class="btn btn-sm tx-13 my-auto btn-outline-primary">
                                        Voir plus
                                      </button>
                                  </div>
                                  <div class="d-flex flex-wrap justify-content-between">
                                      <div class="col-12 col-md-6">

                                          <!-- Code -->
                                          <div class="my-3  " style="font-size: 16px;" *ngIf="courrier.courrier?.dossier">
                                              <span class="mr-2">
                                    Dossier:
                                  </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.dossier?.libelle}}</span>
                                          </div>

                                          <!-- Code -->
                                          <div class="my-3  " style="font-size: 16px;">
                                              <span class="mr-2">
                              Code:
                            </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.libelle}}</span>
                                          </div>


                                          <!-- CNI -->
                                          <div class="my-3  " style="font-size: 16px;">
                                              <span class="mr-2">
                               Objet:
                            </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.objet}}</span>
                                          </div>


                                          <!-- Email  -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                              Type:
                            </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.type?.libelle}}</span>
                                          </div>


                                          <!-- Addresse -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                              Nature:
                            </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.nature?.libelle}}</span>
                                          </div>

                                          <!-- Addresse -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                                  Structure:
                                </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.structure?.libelle}}</span>
                                          </div>

                                          <!-- Addresse -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                                  Suivi par:
                                </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.suivi_par_user?.libelle}}</span>
                                          </div>

                                          <!-- Addresse -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                                              Ajouter par:
                                          </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.created_by?.libelle}}</span>
                                          </div>
                                      </div>

                                      <div class="col-12 col-md-6">

                                          <!-- Urgence -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                              Urgence:
                            </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.urgence?.libelle}}</span>
                                          </div>

                                          <!-- Urgence -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                            Date limite:
                          </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.date_limit |  date:'mediumDate' : undefined : 'fr'}}</span>
                                          </div>

                                          <!-- Statut -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                                    Statut:
                                  </span>
                                              <span class="text-info mb-0" *ngIf="!courrier.courrier?.cloture">{{courrier.courrier?.statut?.libelle | titlecase}}</span>
                                              <span class="mb-0" [ngClass]="courrier.courrier?.cloture.valider ? 'text-success' : 'text-danger'" *ngIf="courrier.courrier?.cloture">
                                    {{courrier.courrier?.cloture.libelle | titlecase}}, le {{courrier.courrier?.date_cloture | date:'mediumDate' : undefined : 'fr'}}
                                </span>
                                          </div>


                                          <!-- Telephone -->
                                          <div class="my-3" style="font-size: 16px;">
                                              <span class="mr-2">
                              Date arrivé:
                            </span>
                                              <span class="tx-rubik tx-dark">{{courrier.date_arrive | date:'mediumDate' : undefined : 'fr'}}</span>
                                          </div>


                                          <!-- Role -->
                                          <div class="my-3" style="font-size: 16px;">
                                              <span class="mr-2">
                              Date de redaction:
                            </span>
                                              <span class="tx-rubik tx-dark">{{ courrier.courrier?.date_redaction | date:'mediumDate' : undefined : 'fr'}}</span>
                                          </div>

                                          <!-- NOm -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                              Provenance:
                            </span>
                                              <span class="tx-rubik tx-dark">{{courrier.provenance?.libelle}}</span>
                                          </div>

                                          <!-- NOm -->
                                          <div class="my-3 " style="font-size: 16px;">
                                              <span class="mr-2">
                                Expediteur:
                              </span>
                                              <span class="tx-rubik tx-dark">{{courrier.expediteur?.libelle}}</span>
                                          </div>
                                      </div>

                                      <div class="col-12">
                                          <!-- NOm -->
                                          <div class="my-3 " style="font-size: 16px;text-align: justify;">
                                              <span class="mr-2">
                              Description:
                            </span>
                                              <span class="tx-rubik tx-dark">{{courrier.courrier?.commentaire}}</span>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </li>
                      </ul>
                      </ng-container>
                    </div>

                    </ng-template>
                  </li>
                </ul>
                <div [ngbNavOutlet]="nav"></div>
              </ng-container>
            </div>
        </div>

    </div>
</div>

<ng-template #noItem>
    <h4 class="text-center title m-2 p-5 ">
        {{ 'Aucun Element' }}
    </h4>
</ng-template>

<ng-template #emptyTemplate>
    <div class="row mx-0 h-75 text-center ">
        <div class="col-sm-12 my-auto ">
            <i class="fal fa-folder-open fa-4x " style="color: #003d79 "></i>
            <br> Vide
        </div>
    </div>
</ng-template>
